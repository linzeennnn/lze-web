function downfolder(e,o){if(confirm("确定要下载文件夹吗")){const n=new FormData;if("undefined"!=typeof ishome&&ishome)n.append("folderPath","/"),n.append("foldername",o);else{pageloading(1);const o=e.querySelector(".folderLink").innerText;let t;t="/"==currentPath.innerText?currentPath.innerText:"/"+currentPath.innerText,console.log(t),n.append("folderPath",t),n.append("foldername",o)}fetch(`${protocol}//${ip}/code/Documents/zip_folder.php`,{method:"POST",body:n}).then(e=>(e.ok,e.json())).then(e=>{if(e.error)notify(e.error);else{"undefined"!=typeof ishome&&ishome?document.querySelector(".loading").style.display="none":pageloading(0),notify("开始下载");const o=document.createElement("a");o.href=e.url,o.download=name+".zip",document.body.appendChild(o),o.click(),o.remove()}})}else"undefined"!=typeof ishome&&ishome&&document.body.removeChild(document.querySelector(".widget-page"))}