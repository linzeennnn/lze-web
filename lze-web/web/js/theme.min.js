function themepage(){let e=document.createElement("div"),t=document.createElement("div");t.className="theme-list",t.id="light-btn",t.setAttribute("onclick","theme('light',color)");let o=document.createElement("div");o.id="light-icon";let l=document.createElement("span");l.innerText="亮模式",t.appendChild(o),t.appendChild(l);let d=document.createElement("div");d.className="theme-list",d.id="dark-btn",d.setAttribute("onclick","theme('dark',color)");let n=document.createElement("div");n.id="dark-icon";let a=document.createElement("span");a.innerText="暗模式",d.appendChild(n),d.appendChild(a);let c=document.createElement("div");c.className="theme-list",c.id="recover-theme",c.setAttribute("onclick","clearLayout()");let r=document.createElement("div");r.id="ori-theme";let i=document.createElement("span");i.innerText="还原布局",c.appendChild(r),c.appendChild(i);let s=document.createElement("div");s.id="color-bar";let m=["default","green","blue","yellow","orange","pink","red"],u=["默认","绿","蓝","黄","橙","粉","红"];m.forEach((e,t)=>{let o=document.createElement("div");o.id=e,o.className="color",o.title=u[t],o.setAttribute("onclick",`theme(mode,'${e}')`),s.appendChild(o)}),e.appendChild(t),e.appendChild(d),e.appendChild(c),e.appendChild(s),newwindow(e,1)}function setcolor(e){let t=document.querySelectorAll(".color");t.forEach(e=>{e.style.filter=""});const o=document.querySelectorAll(".list-page"),l=document.getElementById("phone-back"),d=document.getElementById("dock"),n=document.getElementById("home-btn"),a=document.getElementById("home-bar"),c=document.getElementById("theme-dis");"default"!=e&&e?(color=e,"undefined"!=typeof ishome&&ishome&&(a.style.backgroundColor=`var(--${e})`,n.style.backgroundColor=`var(--${e})`,d.style.backgroundColor=`var(--${e}-nor)`,c.style.backgroundColor=`var(--${e})`,o.forEach(t=>{t.style.backgroundColor=`var(--${e}-page)`})),l.style.backgroundColor=`var(--${e})`,document.body.style.backgroundColor=`var(--${e})`):(color="default","undefined"!=typeof ishome&&ishome&&(a.style.backgroundColor="",n.style.backgroundColor="",d.style.backgroundColor="",c.style.backgroundColor="",o.forEach(e=>{e.style.backgroundColor=""})),t=document.getElementById("default"),l.style.backgroundColor="",document.body.style.backgroundColor="",localStorage.removeItem("color"))}function setmode(e){document.getElementById("dark-btn"),document.getElementById("light-btn");const t=document.getElementById("themesheet");switch(e){case"dark":mode=e,t.href=`${sheetpath}dark.css`;break;case"light":mode=e,t.href=`${sheetpath}light.css`;break;default:mode="dark",t.href=`${sheetpath}dark.css`}}function theme(e,t){"undefined"!=typeof ishome&&ishome&&localStorage.setItem("color",t),localStorage.setItem("mode",e),setmode(e),setcolor(t),document.querySelector('meta[name="theme-color"]').setAttribute("content",metacolor[e][t]),window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.themeColor&&window.webkit.messageHandlers.themeColor.postMessage(metaThemeColor.content)}function clearLayout(){localStorage.removeItem("layout"),loadLayout(),notify("已恢复初始布局"),"undefined"!=typeof ishome&&ishome&&reloadPage()}function saveLayout(){const e={dock:[],widgetLines:{}};dock.querySelectorAll(".dock-back").forEach(t=>{e.dock.push(t.id)}),widgetLines.forEach((t,o)=>{e.widgetLines[o]=[],t.querySelectorAll(".widget").forEach(t=>{e.widgetLines[o].push(t.id)})}),localStorage.setItem("layout",JSON.stringify(e))}function loadLayout(){const e=localStorage.getItem("layout");if(e){let t=JSON.parse(e);t.dock=t.dock.filter(e=>{const t=document.getElementById(e);return!!t&&(dock.appendChild(t),t.classList.add("dock-back"),t.classList.remove("widget"),!0)}),widgetLines.forEach((e,o)=>{t.widgetLines[o]=t.widgetLines[o].filter(t=>{const o=document.getElementById(t);return!!o&&(e.appendChild(o),o.classList.add("widget"),o.classList.remove("dock-back"),!0)})}),localStorage.setItem("layout",JSON.stringify(t))}}let sheetpath;sheetpath="undefined"!=typeof ishome&&ishome?"web/home/":"./";