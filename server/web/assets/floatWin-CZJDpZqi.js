import{r as v,j as e,k as X,h as Y}from"./all-0L4ytAmL.js";function F({children:H,start:y=()=>{},end:g=()=>{},title:C="",show:d,setShow:S}){const w=v.useRef(!1),L=v.useRef(null),[M,k]=v.useState(!1);return v.useEffect(()=>{d?w.current||(y(),w.current=!0):w.current&&(g(),w.current=!1)},[d,y,g]),v.useEffect(()=>()=>{w.current&&(g(),w.current=!1)},[g]),v.useEffect(()=>{if(!d)return;const t=L.current,x=document.getElementsByClassName("float-win-top-bar")[0];if(!t||!x)return;let c=!1,s=0,E=0;const b=r=>{c=!0;const i=t.getBoundingClientRect();s=r.clientX-i.left,E=r.clientY-i.top},f=r=>{if(!c)return;let i=r.clientX-s,m=r.clientY-E;const N=window.innerWidth-t.offsetWidth,j=window.innerHeight-t.offsetHeight;i=Math.max(0,Math.min(i,N)),m=Math.max(0,Math.min(m,j)),t.style.left=i+"px",t.style.top=m+"px"},u=()=>c=!1;return x.addEventListener("mousedown",b),window.addEventListener("mousemove",f),window.addEventListener("mouseup",u),()=>{x.removeEventListener("mousedown",b),window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",u)}},[d]),v.useEffect(()=>{if(!d)return;const t=L.current;if(!t)return;const x=t.querySelectorAll(".resize-handle");let c=!1,s="",E=0,b=0,f=0,u=0,r=0,i=0;const m=250,N=150,j=n=>{n.stopPropagation(),c=!0,s=n.target.dataset.dir;const l=t.getBoundingClientRect();E=n.clientX,b=n.clientY,f=l.width,u=l.height,r=l.left,i=l.top},R=n=>{if(!c)return;let l=n.clientX-E,z=n.clientY-b,a=f,o=u,h=r,p=i;s.includes("r")&&(a=f+l),s.includes("l")&&(a=f-l,h=r+l),s.includes("b")&&(o=u+z),s.includes("t")&&(o=u-z,p=i+z),a<m&&(s.includes("l")&&(h-=m-a),a=m),o<N&&(s.includes("t")&&(p-=N-o),o=N),h=Math.max(0,h),p=Math.max(0,p),a=Math.min(window.innerWidth-h,a),o=Math.min(window.innerHeight-p,o),t.style.width=a+"px",t.style.height=o+"px",t.style.left=h+"px",t.style.top=p+"px"},W=()=>c=!1;return x.forEach(n=>n.addEventListener("mousedown",j)),window.addEventListener("mousemove",R),window.addEventListener("mouseup",W),()=>{x.forEach(n=>n.removeEventListener("mousedown",j)),window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",W)}},[d]),d?e.jsx("div",{className:"bg-enable",children:e.jsxs("div",{className:"float-win "+(M?"full-screen":""),ref:L,children:[e.jsxs("div",{className:"float-win-top-bar",children:[e.jsxs("div",{className:"float-btn-box",children:[e.jsx("button",{className:"btn float-btn",title:Y("close"),onClick:()=>S(!1),children:X("no")}),e.jsx("button",{className:"btn float-btn",title:Y("zoom_in"),onClick:()=>k(!M),children:X("circle")})]}),e.jsx("span",{className:"float-title",children:C})]}),H,e.jsx("div",{className:"resize-handle t","data-dir":"t"}),e.jsx("div",{className:"resize-handle b","data-dir":"b"}),e.jsx("div",{className:"resize-handle l","data-dir":"l"}),e.jsx("div",{className:"resize-handle r","data-dir":"r"}),e.jsx("div",{className:"resize-handle tl","data-dir":"tl"}),e.jsx("div",{className:"resize-handle tr","data-dir":"tr"}),e.jsx("div",{className:"resize-handle bl","data-dir":"bl"}),e.jsx("div",{className:"resize-handle br","data-dir":"br"})]})}):null}export{F};
