function lock(e){const t=document.getElementById("live2d-widget");switch(e){case 0:lockmove(0),dockmove(1),widgetmove(1);break;case 1:t.style.display="",lockmove(1),dockmove(0),widgetmove(0);break}}function dockmove(e){const t=document.getElementById("dock");switch(e){case 1:t.style.display="flex",setTimeout(()=>{t.style.bottom="20px"},500);break;case 0:t.style.bottom="",setTimeout(()=>{t.style.display=""},500);break}}function widgetmove(e){const t=document.getElementById("widget-box");switch(e){case 1:t.style.display="flex",setTimeout(()=>{t.style.opacity="1",t.style.transform="scale(1)"},500);break;case 0:t.style.opacity="",t.style.transform="",setTimeout(()=>{t.style.display=""},500);break}}function lockmove(e){const t=document.getElementById("live2d-widget"),n=document.getElementById("home-bar"),s=document.getElementById("home-btn"),o=document.getElementById("lock-page");switch(e){case 0:o.style.opacity="0",n.style.top="",t.style.top="",s.style.top="",t.style.opacity="0",setTimeout(()=>{t.style.display="none",n.style.display="none",s.style.display="none",o.style.display=""},500);break;case 1:o.style.display="block",n.style.display="",s.style.display="",t.style.display="",setTimeout(()=>{t.style.top="40px",s.style.top="500px",t.style.opacity="",n.style.top="0",o.style.opacity=""},50);break}}function comin(){localStorage.removeItem("theme"),color||(color="default"),theme(mode,color),document.referrer&&document.referrer.split("#")[0]!==window.location.href.split("#")[0]?(dockmove(1),widgetmove(1),lock(0)):lock(1),document.querySelector(`.name`).style.width="200px",document.addEventListener("click",handleDocumentClick),widget("all"),doc_path=`web/doc/doc.html#${ip}`,pic_path=`web/pic/pic.html#${ip}`,mon_path=`web/mon/mon.html#${ip}`,tra_path=`web/tra/tra.html#${ip}`,not_path=`web/not/not.html#${ip}`,bok_path=`web/bok/bok.html#${ip}`,ter_path=`web/ter/ter.html#${ip}`}window.onload=comin,document.addEventListener("DOMContentLoaded",loadLayout);function getip(){return window.location.hash.substring(1)}document.addEventListener("touchmove",function(e){e.scaleX!==1&&e.preventDefault()},{passive:!1});function reloadPage(){location.reload()}function tonext(e,t){widgetopen(e,t),setTimeout(()=>{window.location.replace(e)},300)}function widgetopen(e,t){const i=t.querySelector("div"),a=window.getComputedStyle(t).backgroundColor,r=window.getComputedStyle(i).backgroundImage,s=t.getBoundingClientRect(),n=document.createElement("div"),o=document.createElement("div");n.classList.add("widget-open"),n.style.backgroundColor=a,o.style.backgroundImage=r,n.style.width=s.width+"px",n.style.height=s.height+"px",n.style.top=s.top+"px",n.style.left=s.left+"px",n.appendChild(o),document.body.appendChild(n),setTimeout(()=>{n.style.top="50%",n.style.left="50%",n.style.transform="translate(-50%, -50%) scale(10)",n.style.opacity="0",n.styletransform="translate(-50%, -50%)"},10)}function handleTopBarButtonClick(e){var t,n=document.querySelectorAll("#topBar button");n.forEach(function(t,n){t.classList.remove("selected"),n===e&&t.classList.add("selected")}),t=document.querySelectorAll(".additionalPopup"),t.forEach(function(t,n){n===e?t.classList.add("active"):t.classList.remove("active","return")})}function handleDocumentClick(e){var s,t=document.querySelectorAll("#topBar button"),n=!1;t.forEach(function(t){t.contains(e.target)&&(n=!0)}),n||(t.forEach(function(e){e.classList.remove("selected")}),s=document.querySelectorAll(".additionalPopup"),s.forEach(function(e){e.classList.remove("active","return")}))}const dockback=document.querySelectorAll(".dock-back"),dock=document.getElementById("dock"),widgetLines=document.querySelectorAll(".widget-line"),line3=document.getElementById("widget-line3");let dragmove=null,space=null;widgetLines.forEach(e=>{e.addEventListener("dragstart",dragstart),e.addEventListener("dragover",dragover),e.addEventListener("drop",drop)}),dock.addEventListener("dragstart",dragstart),dock.addEventListener("dragenter",dragenter),dock.addEventListener("dragover",dragover),dock.addEventListener("drop",drop),document.addEventListener("dragover",dragover),document.addEventListener("drop",drop);function dragover(e){e.preventDefault()}function enterline(e){e.preventDefault(),space==null&&(space=document.createElement("div"),space.classList.add("widget"),space.style.opacity="0",e.target.insertAdjacentElement("afterend",space))}function leaveline(e){e.preventDefault(),space.remove()}function dragstart(e){const t=e.target;e.dataTransfer.setData("text",e.target.id),e.target.style.opacity=0;const s=t.querySelector("div"),o=getComputedStyle(s).backgroundImage,n=getComputedStyle(t).backgroundColor;dragmove=document.createElement("div"),dragmove.style.backgroundImage=o,n!="rgba(0, 0, 0, 0)"&&(dragmove.style.backgroundColor=n),dragmove.classList.add("preview"),document.body.appendChild(dragmove),e.dataTransfer.setDragImage(dragmove,50,50)}function mousemove(e){dragmove&&(dragmove.style.left=e.clientX-dragmove.offsetWidth/2+"px",dragmove.style.top=e.clientY-dragmove.offsetHeight/2+"px")}function dragenter(e){e.preventDefault(),e.target==dock?(dock.style.transform="scale(1.2)",dragmove.style.width="64px",dragmove.style.height="64px"):(dock.style.transform="",dragmove&&(dragmove.style.width="",dragmove.style.height=""))}function drop(e){e.preventDefault();const n=e.dataTransfer.getData("text"),t=document.getElementById(n);if(dock.style.transform="",t.style.opacity="",dragmove&&document.body.removeChild(dragmove),dragmove=null,e.target.classList.contains("widget-line")||e.target.classList.contains("widget")){if(e.target.classList.contains("widget")){const n=e.target.parentElement;n.insertBefore(t,e.target)}else e.target.appendChild(t);t.classList.remove("dock-back"),t.classList.add("widget")}else e.target===dock||e.target===dockback?dock.offsetWidth<=document.body.offsetWidth+64?(dock.appendChild(t),t.classList.remove("widget"),t.classList.add("dock-back")):(line3.appendChild(t),t.classList.remove("dock-back"),t.classList.add("widget")):e.target!==dock&&!e.target.classList.contains("widget-line")&&(line3.appendChild(t),t.classList.remove("widget"),t.classList.add("dock-back"));saveLayout()}let findcat=new MutationObserver(function(e){e.forEach(function(){let t=document.getElementById("live2dcanvas");t&&(t.removeEventListener("click",catHandler),t.addEventListener("click",catHandler),findcat.disconnect())})});findcat.observe(document.body,{childList:!0,subtree:!0});function catHandler(){let e=Math.floor(Math.random()*4);switch(e){case 0:notify("喵喵～");break;case 1:notify("linzeen是大天才");break;case 2:notify("哈哈哈哈哈哈哈哈哈");break;case 3:notify("LZE web");break;default:console.log("林泽恩");break}}