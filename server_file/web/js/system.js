function systempage(){let t,d,l,e,a,c,r,n,i,o,s,h,u=document.createElement("div");u.id="sys-list";const m=[{id:"cpu",title:"CPU"},{id:"mem",title:"内存"},{id:"disk",title:"磁盘"},{id:"net",title:"网络"}];m.forEach(a=>{const c=document.createElement("div");c.className="sys-box";const h=document.createElement("div");h.id=a.id,h.className="sys-icon",h.setAttribute("title",a.title);const m=document.createElement("div");m.className="sys-bar";const l=document.createElement("div");l.className="sys-progress";const d=document.createElement("span"),f=document.createElement("div");f.className="sys-loading",d.className="sys-value",s=document.createElement("span"),s.className="sys-value";const p=document.createElement("div");p.className="sys-icon",p.id="netup-icon",o=document.createElement("span"),o.className="sys-value";const g=document.createElement("div");switch(g.className="sys-icon",g.id="netdown-icon",a.id){case"mem":e=document.createElement("span"),e.classList.add("sys-space","sys-value"),e.id=`${a.id}-used`,c.appendChild(e);break;case"disk":t=document.createElement("span"),t.classList.add("sys-space","sys-value"),t.id=`${a.id}-space`,c.appendChild(t);break}switch(c.appendChild(h),u.appendChild(c),a.id!="net"&&(m.appendChild(l),c.appendChild(m),c.appendChild(d),c.appendChild(f)),a.id=="net"&&(c.appendChild(p),c.appendChild(s),c.appendChild(g),c.appendChild(o),c.appendChild(f)),a.id){case"cpu":r=d,cpuProgress=l;break;case"mem":n=d,memProgress=l;break;case"disk":i=d,diskProgress=l;break}}),newwindow(u,1);const p=document.querySelectorAll(".sys-value"),f=document.querySelectorAll(".sys-loading");h=setInterval(()=>{if(winstatus!=1){clearInterval(h);return}fetch(`${protocol}//${ip}/server/system/system.cgi`).then(e=>e.json()).then(u=>{r.textContent=Math.floor(u.cpuUsage)+"%",n.textContent=Math.floor(a/c*100)+"%",i.textContent=Math.floor(d/l*100)+"%",c=u.totalMemory,a=u.usedMemory,n.textContent=Math.floor(u.usedMemory/u.totalMemory*100)+"%",l=Math.floor(u.totalDisk/(1024*1024)),d=Math.floor(u.usedDisk/(1024*1024)),i.textContent=Math.floor(u.usedDisk/u.totalDisk*100)+"%",o.textContent=u.networkRx+"MB",s.textContent=u.networkTx+"MB",cpuProgress.style.width=r.textContent,memProgress.style.width=n.textContent,diskProgress.style.width=i.textContent,e.textContent=a+"MB / "+c+"MB",t.textContent=d+"GB / "+l+"GB",f.forEach(e=>{e.style.display="none"})}).catch(e=>console.error("Error fetching system info:",e))},1e3)}