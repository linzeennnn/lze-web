function themepage(){let s=document.createElement("div"),e=document.createElement("div");e.className="theme-list",e.id="light-btn",e.setAttribute("onclick","theme('light',color)");let d=document.createElement("div");d.id="light-icon";let r=document.createElement("span");r.innerText="亮模式",e.appendChild(d),e.appendChild(r);let n=document.createElement("div");n.className="theme-list",n.id="dark-btn",n.setAttribute("onclick","theme('dark',color)");let a=document.createElement("div");a.id="dark-icon";let i=document.createElement("span");i.innerText="暗模式",n.appendChild(a),n.appendChild(i);let t=document.createElement("div");t.className="theme-list",t.id="recover-theme",t.setAttribute("onclick","clearLayout()");let c=document.createElement("div");c.id="ori-theme";let l=document.createElement("span");l.innerText="还原布局",t.appendChild(c),t.appendChild(l);let o=document.createElement("div");o.id="color-bar";let u=["default","green","blue","yellow","orange","pink","red"],h=["默认","绿","蓝","黄","橙","粉","红"];u.forEach((e,t)=>{let n=document.createElement("div");n.id=e,n.className="color",n.title=h[t],n.setAttribute("onclick",`theme(mode,'${e}')`),o.appendChild(n)}),s.appendChild(e),s.appendChild(n),s.appendChild(t),s.appendChild(o),newwindow(s,1)}let sheetpath;typeof ishome!="undefined"&&ishome?sheetpath="web/home/":sheetpath="./";function setcolor(e){let t=document.querySelectorAll(".color");t.forEach(e=>{e.style.filter=""});const n=document.querySelectorAll(".list-page"),s=document.getElementById("phone-back"),o=document.getElementById("dock"),i=document.getElementById("home-btn"),a=document.getElementById("home-bar"),r=document.getElementById("theme-dis");e=="default"||!e?(color="default",typeof ishome!="undefined"&&ishome&&(a.style.backgroundColor="",i.style.backgroundColor="",o.style.backgroundColor="",r.style.backgroundColor=``,n.forEach(e=>{e.style.backgroundColor=""})),t=document.getElementById("default"),s.style.backgroundColor=``,document.body.style.backgroundColor=``,localStorage.removeItem(`color`)):(color=e,typeof ishome!="undefined"&&ishome&&(a.style.backgroundColor=`var(--${e})`,i.style.backgroundColor=`var(--${e})`,o.style.backgroundColor=`var(--${e}-nor)`,r.style.backgroundColor=`var(--${e})`,n.forEach(t=>{t.style.backgroundColor=`var(--${e}-page)`})),s.style.backgroundColor=`var(--${e})`,document.body.style.backgroundColor=`var(--${e})`)}function setmode(e){const n=document.getElementById("dark-btn"),s=document.getElementById("light-btn"),t=document.getElementById("themesheet");switch(e){case"dark":mode=e,t.href=`${sheetpath}dark.css`;break;case"light":mode=e,t.href=`${sheetpath}light.css`;break;default:mode="dark",t.href=`${sheetpath}dark.css`}}function theme(e,t){typeof ishome!="undefined"&&ishome&&localStorage.setItem(`color`,t),localStorage.setItem("mode",e),setmode(e),setcolor(t),document.querySelector('meta[name="theme-color"]').setAttribute("content",metacolor[e][t]),window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.themeColor&&window.webkit.messageHandlers.themeColor.postMessage(metaThemeColor.content)}function clearLayout(){localStorage.removeItem("layout"),loadLayout(),notify("已恢复初始布局"),typeof ishome!="undefined"&&ishome&&reloadPage()}function saveLayout(){const e={dock:[],widgetLines:{}};dock.querySelectorAll(".dock-back").forEach(t=>{e.dock.push(t.id)}),widgetLines.forEach((t,n)=>{e.widgetLines[n]=[],t.querySelectorAll(".widget").forEach(t=>{e.widgetLines[n].push(t.id)})}),localStorage.setItem("layout",JSON.stringify(e))}function loadLayout(){const e=localStorage.getItem("layout");if(e){let t=JSON.parse(e);t.dock=t.dock.filter(e=>{const t=document.getElementById(e);return!!t&&(dock.appendChild(t),t.classList.add("dock-back"),t.classList.remove("widget"),!0)}),widgetLines.forEach((e,n)=>{t.widgetLines[n]=t.widgetLines[n].filter(t=>{const n=document.getElementById(t);return!!n&&(e.appendChild(n),n.classList.add("widget"),n.classList.remove("dock-back"),!0)})}),localStorage.setItem("layout",JSON.stringify(t))}}