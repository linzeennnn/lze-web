function notify(text){const notify=document.createElement("div");notify.id="notify";const notifytext=document.createElement("span");notifytext.id="notifytext",notifytext.innerText=text,notify.appendChild(notifytext),document.body.appendChild(notify),setTimeout(function(){notify.style.opacity="1",notify.style.top="5px"},10),setTimeout(function(){notify.style.opacity="",setTimeout(function(){document.body.removeChild(notify)},1e3)},1e3)}function lock(status){const live2d=document.getElementById("live2d-widget");switch(status){case 0:lockmove(0),dockmove(1),widgetmove(1);break;case 1:live2d.style.display="",lockmove(1),dockmove(0),widgetmove(0)}}function dockmove(status){const dock=document.getElementById("dock");switch(status){case 1:dock.style.display="flex",setTimeout(()=>{dock.style.bottom="20px"},500);break;case 0:dock.style.bottom="",setTimeout(()=>{dock.style.display=""},500)}}function widgetmove(status){const widget=document.getElementById("widget-box");switch(status){case 1:widget.style.display="flex",setTimeout(()=>{widget.style.opacity="1",widget.style.transform="scale(1)"},500);break;case 0:widget.style.opacity="",widget.style.transform="",setTimeout(()=>{widget.style.display=""},500)}}function lockmove(status){const live2d=document.getElementById("live2d-widget"),homebar=document.getElementById("home-bar"),btn=document.getElementById("home-btn"),page=document.getElementById("lock-page");switch(status){case 0:page.style.opacity="0",homebar.style.top="",live2d.style.top="",btn.style.top="",live2d.style.opacity="0",setTimeout(()=>{live2d.style.display="none",homebar.style.display="none",btn.style.display="none",page.style.display=""},500);break;case 1:page.style.display="block",homebar.style.display="",btn.style.display="",live2d.style.display="",setTimeout(()=>{live2d.style.top="40px",btn.style.top="500px",live2d.style.opacity="",homebar.style.top="0",page.style.opacity=""},50)}}function comin(){localStorage.removeItem("theme"),color||(color="default"),theme(mode,color),document.referrer&&document.referrer.split("#")[0]!==window.location.href.split("#")[0]?(dockmove(1),widgetmove(1),lock(0)):lock(1),document.querySelector(".name").style.width="200px",document.addEventListener("click",handleDocumentClick),access(),widget("all"),doc_path=`web/doc/doc.html#${ip}`,pic_path=`web/pic/pic.html#${ip}`,mon_path=`web/mon/monitor.html#${ip}`,tra_path=`web/tra/tra.html#${ip}`,not_path=`web/not/not.html#${ip}`,bok_path=`web/bok/bok.html#${ip}`,ter_path=`web/ter/ter.html#${ip}`}function getip(){return window.location.hash.substring(1)}function reloadPage(){"1"==logstatus&&(location.hash=`#${ip}`),location.reload()}function tonext(path,widget,place,line){widgetopen(path,widget),setTimeout(()=>{window.location.replace(path)},300)}function widgetopen(path,widget){const icon=widget.querySelector("div"),widgetback=window.getComputedStyle(widget).backgroundColor,iconback=window.getComputedStyle(icon).backgroundImage,rect=widget.getBoundingClientRect(),open=document.createElement("div"),openicon=document.createElement("div");open.classList.add("widget-open"),open.style.backgroundColor=widgetback,openicon.style.backgroundImage=iconback,open.style.width=rect.width+"px",open.style.height=rect.height+"px",open.style.top=rect.top+"px",open.style.left=rect.left+"px",open.appendChild(openicon),document.body.appendChild(open),setTimeout(()=>{open.style.top="50%",open.style.left="50%",open.style.transform="translate(-50%, -50%) scale(10)",open.style.opacity="0",open.styletransform="translate(-50%, -50%)"},10)}function handleTopBarButtonClick(index){var buttons=document.querySelectorAll("#topBar button");buttons.forEach(function(button,i){button.classList.remove("selected"),i===index&&button.classList.add("selected")});var additionalPopups=document.querySelectorAll(".additionalPopup");additionalPopups.forEach(function(popup,i){i===index?popup.classList.add("active"):popup.classList.remove("active","return")})}function handleDocumentClick(event){var buttons=document.querySelectorAll("#topBar button"),isButtonClick=!1;if(buttons.forEach(function(button){button.contains(event.target)&&(isButtonClick=!0)}),!isButtonClick){buttons.forEach(function(button){button.classList.remove("selected")});var additionalPopups=document.querySelectorAll(".additionalPopup");additionalPopups.forEach(function(popup){popup.classList.remove("active","return")})}}function dragover(e){e.preventDefault()}function enterline(e){e.preventDefault(),null==space&&(space=document.createElement("div"),space.classList.add("widget"),space.style.opacity="0",e.target.insertAdjacentElement("afterend",space))}function leaveline(e){e.preventDefault(),space.remove()}function dragstart(e){const drag=e.target;e.dataTransfer.setData("text",e.target.id),e.target.style.opacity=0;const icon=drag.querySelector("div"),iconback=getComputedStyle(icon).backgroundImage,dragback=getComputedStyle(drag).backgroundColor;dragmove=document.createElement("div"),dragmove.style.backgroundImage=iconback,"rgba(0, 0, 0, 0)"!=dragback&&(dragmove.style.backgroundColor=dragback),dragmove.classList.add("preview"),document.body.appendChild(dragmove),e.dataTransfer.setDragImage(dragmove,50,50)}function mousemove(e){dragmove&&(dragmove.style.left=e.clientX-dragmove.offsetWidth/2+"px",dragmove.style.top=e.clientY-dragmove.offsetHeight/2+"px")}function dragenter(e){e.preventDefault(),e.target==dock?(dock.style.transform="scale(1.2)",dragmove.style.width="64px",dragmove.style.height="64px"):(dock.style.transform="",dragmove&&(dragmove.style.width="",dragmove.style.height=""))}function drop(e){e.preventDefault();const data=e.dataTransfer.getData("text"),draggedElement=document.getElementById(data);if(dock.style.transform="",draggedElement.style.opacity="",dragmove&&document.body.removeChild(dragmove),dragmove=null,e.target.classList.contains("widget-line")||e.target.classList.contains("widget")){if(e.target.classList.contains("widget")){const parentLine=e.target.parentElement;parentLine.insertBefore(draggedElement,e.target)}else e.target.appendChild(draggedElement);draggedElement.classList.remove("dock-back"),draggedElement.classList.add("widget")}else e.target===dock||e.target===dockback?dock.offsetWidth<=document.body.offsetWidth+64?(dock.appendChild(draggedElement),draggedElement.classList.remove("widget"),draggedElement.classList.add("dock-back")):(line3.appendChild(draggedElement),draggedElement.classList.remove("dock-back"),draggedElement.classList.add("widget")):e.target===dock||e.target.classList.contains("widget-line")||(line3.appendChild(draggedElement),draggedElement.classList.remove("widget"),draggedElement.classList.add("dock-back"));saveLayout()}function catHandler(){let random=Math.floor(4*Math.random());switch(random){case 0:notify("喵喵～");break;case 1:notify("linzeen是大天才");break;case 2:notify("哈哈哈哈哈哈哈哈哈");break;case 3:notify("LZE web");break;default:console.log("林泽恩")}}window.onload=comin,document.addEventListener("DOMContentLoaded",loadLayout),document.addEventListener("touchmove",function(event){1!==event.scaleX&&event.preventDefault()},{passive:!1});const dockback=document.querySelectorAll(".dock-back"),dock=document.getElementById("dock"),widgetLines=document.querySelectorAll(".widget-line"),line3=document.getElementById("widget-line3");let dragmove=null,space=null;widgetLines.forEach(line=>{line.addEventListener("dragstart",dragstart),line.addEventListener("dragover",dragover),line.addEventListener("drop",drop)}),dock.addEventListener("dragstart",dragstart),dock.addEventListener("dragenter",dragenter),dock.addEventListener("dragover",dragover),dock.addEventListener("drop",drop),document.addEventListener("dragover",dragover),document.addEventListener("drop",drop);let findcat=new MutationObserver(function(mutations){mutations.forEach(function(mutation){let cat=document.getElementById("live2dcanvas");cat&&(cat.removeEventListener("click",catHandler),cat.addEventListener("click",catHandler),findcat.disconnect())})});findcat.observe(document.body,{childList:!0,subtree:!0});