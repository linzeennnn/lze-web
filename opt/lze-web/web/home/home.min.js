function notify(e){const t=document.createElement("div");t.id="notify";const o=document.createElement("span");o.id="notifytext",o.innerText=e,t.appendChild(o),document.body.appendChild(t),setTimeout(function(){t.style.opacity="1",t.style.top="5px"},10),setTimeout(function(){t.style.opacity="",setTimeout(function(){document.body.removeChild(t)},1e3)},1e3)}function lock(e){const t=document.getElementById("live2d-widget");switch(e){case 0:lockmove(0),dockmove(1),widgetmove(1);break;case 1:t.style.display="",lockmove(1),dockmove(0),widgetmove(0)}}function dockmove(e){const t=document.getElementById("dock");switch(e){case 1:t.style.display="flex",setTimeout(()=>{t.style.bottom="20px"},500);break;case 0:t.style.bottom="",setTimeout(()=>{t.style.display=""},500)}}function widgetmove(e){const t=document.getElementById("widget-box");switch(e){case 1:t.style.display="flex",setTimeout(()=>{t.style.opacity="1",t.style.transform="scale(1)"},500);break;case 0:t.style.opacity="",t.style.transform="",setTimeout(()=>{t.style.display=""},500)}}function lockmove(e){const t=document.getElementById("live2d-widget"),o=document.getElementById("home-bar"),a=document.getElementById("home-btn"),n=document.getElementById("lock-page");switch(e){case 0:n.style.opacity="0",o.style.top="",t.style.top="",a.style.top="",t.style.opacity="0",setTimeout(()=>{t.style.display="none",o.style.display="none",a.style.display="none",n.style.display=""},500);break;case 1:n.style.display="block",o.style.display="",a.style.display="",t.style.display="",setTimeout(()=>{t.style.top="40px",a.style.top="500px",t.style.opacity="",o.style.top="0",n.style.opacity=""},50)}}function comin(){localStorage.removeItem("theme"),color||(color="default"),theme(mode,color),document.referrer&&document.referrer.split("#")[0]!==window.location.href.split("#")[0]?(dockmove(1),widgetmove(1),lock(0)):lock(1),document.querySelector(".name").style.width="200px",document.addEventListener("click",handleDocumentClick),access(),widget("all"),doc_path=`web/doc/doc.html#${ip}`,pic_path=`web/pic/pic.html#${ip}`,mon_path=`web/mon/monitor.html#${ip}`,tra_path=`web/tra/tra.html#${ip}`,not_path=`web/not/not.html#${ip}`,bok_path=`web/bok/bok.html#${ip}`,ter_path=`web/ter/ter.html#${ip}`}function getip(){return window.location.hash.substring(1)}function reloadPage(){"1"==logstatus&&(location.hash=`#${ip}`),location.reload()}function tonext(e,t,o,a){widgetopen(e,t),setTimeout(()=>{window.location.replace(e)},300)}function widgetopen(e,t){const o=t.querySelector("div"),a=window.getComputedStyle(t).backgroundColor,n=window.getComputedStyle(o).backgroundImage,d=t.getBoundingClientRect(),c=document.createElement("div"),s=document.createElement("div");c.classList.add("widget-open"),c.style.backgroundColor=a,s.style.backgroundImage=n,c.style.width=d.width+"px",c.style.height=d.height+"px",c.style.top=d.top+"px",c.style.left=d.left+"px",c.appendChild(s),document.body.appendChild(c),setTimeout(()=>{c.style.top="50%",c.style.left="50%",c.style.transform="translate(-50%, -50%) scale(10)",c.style.opacity="0",c.styletransform="translate(-50%, -50%)"},10)}function handleTopBarButtonClick(e){var t=document.querySelectorAll("#topBar button");t.forEach(function(t,o){t.classList.remove("selected"),o===e&&t.classList.add("selected")});var o=document.querySelectorAll(".additionalPopup");o.forEach(function(t,o){o===e?t.classList.add("active"):t.classList.remove("active","return")})}function handleDocumentClick(e){var t=document.querySelectorAll("#topBar button"),o=!1;if(t.forEach(function(t){t.contains(e.target)&&(o=!0)}),!o){t.forEach(function(e){e.classList.remove("selected")});var a=document.querySelectorAll(".additionalPopup");a.forEach(function(e){e.classList.remove("active","return")})}}function dragover(e){e.preventDefault()}function enterline(e){e.preventDefault(),null==space&&(space=document.createElement("div"),space.classList.add("widget"),space.style.opacity="0",e.target.insertAdjacentElement("afterend",space))}function leaveline(e){e.preventDefault(),space.remove()}function dragstart(e){const t=e.target;e.dataTransfer.setData("text",e.target.id),e.target.style.opacity=0;const o=t.querySelector("div"),a=getComputedStyle(o).backgroundImage,n=getComputedStyle(t).backgroundColor;dragmove=document.createElement("div"),dragmove.style.backgroundImage=a,"rgba(0, 0, 0, 0)"!=n&&(dragmove.style.backgroundColor=n),dragmove.classList.add("preview"),document.body.appendChild(dragmove),e.dataTransfer.setDragImage(dragmove,50,50)}function mousemove(e){dragmove&&(dragmove.style.left=e.clientX-dragmove.offsetWidth/2+"px",dragmove.style.top=e.clientY-dragmove.offsetHeight/2+"px")}function dragenter(e){e.preventDefault(),e.target==dock?(dock.style.transform="scale(1.2)",dragmove.style.width="64px",dragmove.style.height="64px"):(dock.style.transform="",dragmove&&(dragmove.style.width="",dragmove.style.height=""))}function drop(e){e.preventDefault();const t=e.dataTransfer.getData("text"),o=document.getElementById(t);if(dock.style.transform="",o.style.opacity="",dragmove&&document.body.removeChild(dragmove),dragmove=null,e.target.classList.contains("widget-line")||e.target.classList.contains("widget")){if(e.target.classList.contains("widget")){const t=e.target.parentElement;t.insertBefore(o,e.target)}else e.target.appendChild(o);o.classList.remove("dock-back"),o.classList.add("widget")}else e.target===dock||e.target===dockback?dock.offsetWidth<=document.body.offsetWidth+64?(dock.appendChild(o),o.classList.remove("widget"),o.classList.add("dock-back")):(line3.appendChild(o),o.classList.remove("dock-back"),o.classList.add("widget")):e.target===dock||e.target.classList.contains("widget-line")||(line3.appendChild(o),o.classList.remove("widget"),o.classList.add("dock-back"));saveLayout()}function catHandler(){let e=Math.floor(4*Math.random());switch(e){case 0:notify("人生何处不青山");break;case 1:notify("linzeen是大天才");break;case 2:notify("哈哈哈哈哈哈哈哈哈");break;case 3:notify("LZE web");break;default:console.log("林泽恩")}}window.onload=comin,document.addEventListener("DOMContentLoaded",loadLayout),document.addEventListener("touchmove",function(e){禁用水平滑动,1!==e.scaleX&&e.preventDefault()},{passive:!1});const dockback=document.querySelectorAll(".dock-back"),dock=document.getElementById("dock"),widgetLines=document.querySelectorAll(".widget-line"),line3=document.getElementById("widget-line3");let dragmove=null,space=null;widgetLines.forEach(e=>{e.addEventListener("dragstart",dragstart),e.addEventListener("dragover",dragover),e.addEventListener("drop",drop)}),dock.addEventListener("dragstart",dragstart),dock.addEventListener("dragenter",dragenter),dock.addEventListener("dragover",dragover),dock.addEventListener("drop",drop),document.addEventListener("dragover",dragover),document.addEventListener("drop",drop);let observer=new MutationObserver(function(e){e.forEach(function(e){let t=document.getElementById("live2dcanvas");t&&(t.removeEventListener("click",catHandler),t.addEventListener("click",catHandler),observer.disconnect())})});observer.observe(document.body,{childList:!0,subtree:!0});