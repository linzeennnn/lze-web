function systempage(){let e,t,s,n,a,o,d,c,l,i,r,m,p=document.createElement("div");p.id="sys-list";const u=[{id:"cpu",title:"CPU"},{id:"mem",title:"内存"},{id:"disk",title:"磁盘"},{id:"net",title:"网络"}];u.forEach(t=>{const s=document.createElement("div");s.className="sys-box";const a=document.createElement("div");a.id=t.id,a.className="sys-icon",a.setAttribute("title",t.title);const o=document.createElement("div");o.className="sys-bar";const m=document.createElement("div");m.className="sys-progress";const u=document.createElement("span"),h=document.createElement("div");h.className="sys-loading",u.className="sys-value",r=document.createElement("span"),r.className="sys-value";const y=document.createElement("div");y.className="sys-icon",y.id="netup-icon",i=document.createElement("span"),i.className="sys-value";const C=document.createElement("div");switch(C.className="sys-icon",C.id="netdown-icon",t.id){case"mem":n=document.createElement("span"),n.classList.add("sys-space","sys-value"),n.id=`${t.id}-used`,s.appendChild(n);break;case"disk":e=document.createElement("span"),e.classList.add("sys-space","sys-value"),e.id=`${t.id}-space`,s.appendChild(e)}switch(s.appendChild(a),p.appendChild(s),"net"!=t.id&&(o.appendChild(m),s.appendChild(o),s.appendChild(u),s.appendChild(h)),"net"==t.id&&(s.appendChild(y),s.appendChild(r),s.appendChild(C),s.appendChild(i),s.appendChild(h)),t.id){case"cpu":d=u,cpuProgress=m;break;case"mem":c=u,memProgress=m;break;case"disk":l=u,diskProgress=m}}),newwindow(p,1);document.querySelectorAll(".sys-value");const h=document.querySelectorAll(".sys-loading");m=setInterval(()=>{1==winstatus?fetch(`${protocol}//${ip}/code/system/system.php`).then(e=>e.json()).then(m=>{d.textContent=Math.floor(m.cpuUsage)+"%",c.textContent=Math.floor(a/o*100)+"%",l.textContent=Math.floor(t/s*100)+"%",o=m.totalMemory,a=m.usedMemory,c.textContent=Math.floor(m.usedMemory/m.totalMemory*100)+"%",s=Math.floor(m.totalDisk/1048576),t=Math.floor(m.usedDisk/1048576),l.textContent=Math.floor(m.usedDisk/m.totalDisk*100)+"%",i.textContent=m.networkRx+"MB",r.textContent=m.networkTx+"MB",cpuProgress.style.width=d.textContent,memProgress.style.width=c.textContent,diskProgress.style.width=l.textContent,n.textContent=a+"MB / "+o+"MB",e.textContent=t+"GB / "+s+"GB",h.forEach(e=>{e.style.display="none"})}).catch(e=>console.error("Error fetching system info:",e)):clearInterval(m)},1e3)}