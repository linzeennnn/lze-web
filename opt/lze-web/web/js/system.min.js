function getsystem(e){switch(e){case 1:systemPage.style.display="flex",setTimeout(()=>{systemPage.style.opacity="1"},10),intervalId=setInterval(()=>{fetch(`${protocol}//${ip}/code/system/system.php`).then(e=>e.json()).then(e=>{cpuValue.textContent=Math.floor(e.cpuUsage)+"%",memValue.textContent=Math.floor(memused/memall*100)+"%",diskValue.textContent=Math.floor(diskused/diskall*100)+"%",memall=e.totalMemory,memused=e.usedMemory,memValue.textContent=Math.floor(e.usedMemory/e.totalMemory*100)+"%",diskall=Math.floor(e.totalDisk/1048576),diskused=Math.floor(e.usedDisk/1048576),diskValue.textContent=Math.floor(e.usedDisk/e.totalDisk*100)+"%",netdownvalue.textContent=e.networkRx+"MB",netupvalue.textContent=e.networkTx+"MB",cpuProgress.style.width=cpuValue.textContent,memProgress.style.width=memValue.textContent,diskProgress.style.width=diskValue.textContent,memspace.textContent=memused+"MB / "+memall+"MB",diskspace.textContent=diskused+"GB / "+diskall+"GB",sysloading.forEach(e=>{e.style.display="none"})}).catch(e=>console.error("Error fetching system info:",e))},4e3);break;case 0:clearInterval(intervalId),systemPage.style.opacity="",setTimeout(()=>{systemPage.style.display=""},1e3)}}let diskspace,diskused,diskall,memspace,memused,memall,cpuValue,memValue,diskValue,netdownvalue,netupvalue,intervalId;const systemPage=document.createElement("div");systemPage.id="system-page",systemPage.classList.add("option-page");const closeSys=document.createElement("div");closeSys.id="close-sys",closeSys.onclick=(()=>getsystem(0)),closeSys.title="关闭系统监视";const systemBoxes=[{id:"cpu",title:"CPU"},{id:"mem",title:"内存"},{id:"disk",title:"磁盘"},{id:"net",title:"网络"}],syslist=document.createElement("div");syslist.id="sys-list",syslist.classList.add("list-page"),syslist.appendChild(closeSys),systemBoxes.forEach(e=>{const s=document.createElement("div");s.className="sys-box";const t=document.createElement("div");t.id=e.id,t.className="sys-icon",t.setAttribute("title",e.title);const a=document.createElement("div");a.className="sys-bar";const l=document.createElement("div");l.className="sys-progress";const d=document.createElement("span"),n=document.createElement("div");n.className="sys-loading",d.className="sys-value",netupvalue=document.createElement("span"),netupvalue.className="sys-value";const i=document.createElement("div");i.className="sys-icon",i.id="netup-icon",netdownvalue=document.createElement("span"),netdownvalue.className="sys-value";const o=document.createElement("div");switch(o.className="sys-icon",o.id="netdown-icon",e.id){case"mem":memspace=document.createElement("span"),memspace.classList.add("sys-space","sys-value"),memspace.id=`${e.id}-used`,s.appendChild(memspace);break;case"disk":diskspace=document.createElement("span"),diskspace.classList.add("sys-space","sys-value"),diskspace.id=`${e.id}-space`,s.appendChild(diskspace)}switch(s.appendChild(t),syslist.appendChild(s),"net"!=e.id&&(a.appendChild(l),s.appendChild(a),s.appendChild(d),s.appendChild(n)),"net"==e.id&&(s.appendChild(i),s.appendChild(netupvalue),s.appendChild(o),s.appendChild(netdownvalue),s.appendChild(n)),document.body.appendChild(systemPage),e.id){case"cpu":cpuValue=d,cpuProgress=l;break;case"mem":memValue=d,memProgress=l;break;case"disk":diskValue=d,diskProgress=l}}),systemPage.appendChild(syslist);const loadsys=document.querySelectorAll(".sys-value"),sysloading=document.querySelectorAll(".sys-loading");