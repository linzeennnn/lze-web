function downfolder(folder,homename){if(confirm("确定要下载文件夹吗")){const formData=new FormData;if("undefined"!=typeof ishome&&ishome)formData.append("folderPath","/"),formData.append("foldername",homename);else{pageloading(1);const name=folder.querySelector(".folderLink").innerText;let path;path="/"==currentPath.innerText?currentPath.innerText:"/"+currentPath.innerText,console.log(path),formData.append("folderPath",path),formData.append("foldername",name)}fetch(`${protocol}//${ip}/code/Documents/zip_folder.php`,{method:"POST",body:formData}).then(response=>(response.ok,response.json())).then(data=>{if(data.error)notify(data.error);else{"undefined"!=typeof ishome&&ishome?document.querySelector(".loading").style.display="none":pageloading(0),notify("开始下载");const a=document.createElement("a");a.href=data.url,a.download=name+".zip",document.body.appendChild(a),a.click(),a.remove()}})}else"undefined"!=typeof ishome&&ishome&&document.body.removeChild(document.querySelector(".widget-page"))}